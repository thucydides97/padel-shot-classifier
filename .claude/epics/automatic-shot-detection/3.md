---
name: Implement overhead window detection
status: open
created: 2025-11-22T21:39:47Z
updated: 2025-11-22T21:39:47Z
github: [Will be updated when synced to GitHub]
depends_on: [001]
parallel: false
conflicts_with: []
---

# Task: Implement overhead window detection

## Description
Create the core detection algorithm that identifies time windows where the player's wrist is above shoulder height, indicating potential overhead shots. Use signal smoothing and thresholding to find candidate shot regions.

## Acceptance Criteria
- [ ] Calculate wrist height ratio signal for all frames
- [ ] Apply moving average smoothing (window=5)
- [ ] Find windows where signal exceeds threshold (default 0.1)
- [ ] Merge nearby windows (gap < 10 frames)
- [ ] Filter by minimum/maximum duration (15-90 frames)
- [ ] Return list of (start_frame, end_frame) tuples

## Technical Details
- Add scipy to dependencies for signal processing
- Use numpy for signal calculations
- Implement configurable threshold parameter
- Handle edge cases: no shots, very short videos, poor pose quality

**Algorithm:**
```python
1. signal = smooth(wrist_height_ratio, window=5)
2. overhead_mask = signal > threshold
3. windows = find_contiguous_regions(overhead_mask)
4. windows = merge_nearby(windows, gap=10)
5. windows = filter_by_duration(windows, min=15, max=90)
```

**Files affected:**
- src/padel_shot_classifier/shot_detector.py (new)
- pyproject.toml (add scipy)

## Dependencies
- [ ] Task 001 - Signal utilities

## Effort Estimate
- Size: M
- Hours: 4-6
- Parallel: false

## Definition of Done
- [ ] Window detection algorithm implemented
- [ ] scipy added to project dependencies
- [ ] Unit tests for window detection
- [ ] Tested on sample pose data
