---
name: Integrate with main pipeline
status: open
created: 2025-11-22T21:39:47Z
updated: 2025-11-22T21:39:47Z
github: [Will be updated when synced to GitHub]
depends_on: [006]
parallel: true
conflicts_with: []
---

# Task: Integrate with main pipeline

## Description
Add automatic shot detection as an optional step in the main.py pipeline, allowing users to run the full workflow without manual annotation.

## Acceptance Criteria
- [ ] Add --auto-detect flag to main.py
- [ ] Skip labels requirement when auto-detect is enabled
- [ ] Detection output feeds into classification seamlessly
- [ ] Clear messaging about using auto-detected vs manual labels
- [ ] Works with existing --skip-pose-extraction flag

## Technical Details
**Updated main.py workflow:**
```python
if args.auto_detect:
    print("Auto-detecting shots...")
    detector = ShotDetector(threshold=args.threshold)
    shots = detector.detect(pose_data)
    detector.to_csv(shots, labels_path)
    print(f"Detected {len(shots)} shots")
else:
    # Require --labels as before
    if not args.labels:
        parser.error("--labels required (or use --auto-detect)")
```

**New arguments:**
```python
parser.add_argument('--auto-detect', action='store_true',
                   help='Automatically detect shot boundaries')
parser.add_argument('--detection-threshold', type=float, default=0.7,
                   help='Confidence threshold for auto-detection')
```

**Files affected:**
- src/padel_shot_classifier/main.py

## Dependencies
- [ ] Task 006 - CLI interface complete

## Effort Estimate
- Size: S
- Hours: 2-3
- Parallel: true (can be done while validation runs)

## Definition of Done
- [ ] --auto-detect flag works in main.py
- [ ] Full pipeline runs without manual labels
- [ ] README updated with auto-detect examples
- [ ] Backward compatible (existing usage unchanged)
